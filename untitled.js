class e{constructor(){this.init()}init(){this.setReferrer(),this.listenLinkClick(),this.listenWindowOpen(),window.addEventListener("popstate",(()=>this.setReferrer()))}getReferrer(){return this.referrer}setReferrer(){this.referrer="&token=23232"}listenLinkClick(){document.body.addEventListener("click",function(e){var t=e.target||e.srcElement;"a"===t.nodeName.toLocaleLowerCase()&&(e.preventDefault?e.preventDefault():window.event.returnValue=!0,this.choosePush(t))}.bind(this))}choosePush(e){const t=e.getAttribute("target"),r=e.getAttribute("href"),i=this.formatNavigatedUrl(r);"_blank"===t?window.location.href="luago.html?id="+i:window.open(i)}listenWindowOpen(){var e=window.open;window.open=function(...t){return t[0]=this.formatNavigatedUrl(t[0],this.getQueryVariable(t[0])),e(...t)}.bind(this)}listenWindowLocation(){}formatNavigatedUrl(e,t={}){const r=e.split("?")[0],i=this.getQueryVariable(e);i.referrer=this.getReferrer(),Object.keys(t).forEach((e=>{i[e]=t[e]}));let n=this.objetToQuery(i);return`${r}${n?`?${n}`:""}`}getQueryVariable(e,t){var r=(e.split("?")[1]||"").split("&");let i={};for(var n=0;n<r.length;n++){var s=r[n].split("=");if(s[0]&&s[1]&&(i[s[0]]=s[1].split("#")[0].split("/")[0]),t&&s[0]==t)return s[1].split("#")[0].split("/")[0]}return t?"":i}objetToQuery(e){let t=Object.keys(e);return t.reduce(((r,i,n)=>r+=`${i}=${e[i]}${n<t.length-1?"&":""}`),"")}}window.LinkEvent=e,new e;