var t="2.2.0";let s=document.querySelectorAll("list>a,.tj-obj,#cs>list>a");s.forEach((t=>{t.addEventListener("mousemove",(s=>{x=s.clientX-$(t).offset().left,y=s.clientY-$(t).offset().top,$(t).css("cssText",`background:radial-gradient(circle at ${x}px ${y}px,var(--hover) 10%, #00000000);`)})),t.addEventListener("mouseout",(()=>{$(t).css("cssText","background:radial-gradient(#00000000,#00000000);")}))})),document.getElementsByTagName("html")[0].oncontextmenu=function(t){return!1};let e={titbar:[function(t){return"calc"==t?"null":$(".window."+t).hasClass("max")?['<i class="bi bi-window-stack"></i> 还原',`maxwin('${t}')`]:['<i class="bi bi-window-fullscreen"></i> 最大化',`maxwin('${t}')`]},function(t){return['<i class="bi bi-window-dash"></i> 最小化',`minwin('${t}')`]},function(t){return['<i class="bi bi-window-x"></i> 关闭',`hidewin('${t}')`]}],desktop:[['<i class="bi bi-circle-square"></i> 切换主题',"toggletheme()"],['<i class="bi bi-github"></i> 在 Github 中查看此项目',"window.open('https://github.com/tjy-gitnub/win12','_blank');"],['<i class="bi bi-chat-left-text"></i> 发送反馈',"window.open('https://github.com/tjy-gitnub/win12/issues','_blank');"],['<i class="bi bi-info-circle"></i> 关于 Win12 网页版',"$('#win-about>.about').show(200);$('#win-about>.update').hide();showwin('about');if($('.window.about').hasClass('min'))minwin('about');"]],winx:[function(t){return $("#start-menu").hasClass("show")?['<i class="bi bi-box-arrow-in-down"></i> 关闭开始菜单',"hide_startmenu()"]:['<i class="bi bi-box-arrow-in-up"></i> 打开开始菜单',"$('#start-btn').addClass('show');\n                if($('#search-win').hasClass('show')){$('#search-btn').removeClass('show');\n                $('#search-win').removeClass('show');setTimeout(() => {$('#search-win').removeClass('show-begin');\n                }, 200);}$('#start-menu').addClass('show-begin');setTimeout(() => {$('#start-menu').addClass('show');\n                }, 0);"]},"<hr>",['<i class="bi bi-gear"></i> 设置',"showwin('setting')"],['<i class="bi bi-folder2-open"></i> 文件资源管理器',"showwin('explorer')"],['<i class="bi bi-search"></i> 搜索',"$('#search-btn').addClass('show');hide_startmenu();\n        $('#search-win').addClass('show-begin');setTimeout(() => {$('#search-win').addClass('show');\n        $('#search-input').focus();}, 0);"],"<hr>",['<i class="bi bi-power"></i> 关机',"window.location='shutdown.html'"],['<i class="bi bi-arrow-counterclockwise"></i> 重启',"window.location='reload.html'"]],dockabout:[function(t){return t?['<i class="bi bi-arrow-bar-down"></i> 收起',"$('.dock.about').removeClass('show')"]:['<i class="bi bi-arrow-bar-up"></i> 展开',"$('.dock.about').addClass('show')"]},['<i class="bi bi-info-circle"></i> 更多信息',"$('#win-about>.about').show(200);$('#win-about>.update').hide();\n        showwin('about');if($('.window.about').hasClass('min'))minwin('about');"]],msgupdate:[['<i class="bi bi-layout-text-window-reverse"></i> 查看详细',"showwin('about');if($('.window.about').hasClass('min'))\n        minwin('about');$('#win-about>.update').show(200);$('#win-about>.about').hide();\n        $('#win-about>.update>div>details:first-child').attr('open','open')"],['<i class="bi bi-box-arrow-right"></i> 关闭',"$('.msg.update').removeClass('show')"]]};function i(t,s,i){$("#cm").css("left",t.clientX),$("#cm").css("top",t.clientY);let a="";e[s].forEach((t=>{if("function"==typeof t){if(ret=t(i),"null"==ret)return!0;a+=`<a class="a" onmousedown="${ret[1]}">${ret[0]}</a>\n`}else a+="string"==typeof t?t+"\n":`<a class="a" onmousedown="${t[1]}">${t[0]}</a>\n`})),$("#cm>list")[0].innerHTML=a,$("#cm").addClass("show-begin"),setTimeout((()=>{$("#cm").addClass("show")}),0),$("#cm>.foc").focus(),setTimeout((()=>{t.clientY+$("#cm")[0].offsetHeight>$("html")[0].offsetHeight&&$("#cm").css("top",t.clientY-$("#cm")[0].offsetHeight),t.clientX+$("#cm")[0].offsetWidth>$("html")[0].offsetWidth&&$("#cm").css("left",$("html")[0].offsetWidth-$("#cm")[0].offsetWidth-5)}),200)}function a(){let t=new Date;$("#s-m-r>.row1>.tool>.date").text(`星期${["日","一","二","三","四","五","六"][t.getDay()]}, ${t.getFullYear()}年${t.getMonth().toString().padStart(2,"0")}月${t.getDate().toString().padStart(2,"0")}日`),$("#s-m-r>.row1>.tool>.time").text(`${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}:${t.getSeconds().toString().padStart(2,"0")}`),$(".dock.date>.date").text(`${t.getFullYear()}/${t.getMonth().toString().padStart(2,"0")}/${t.getDate().toString().padStart(2,"0")}`),$(".dock.date>.time").text(`${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}:${t.getSeconds().toString().padStart(2,"0")}`)}function o(t){0==$("#taskbar>."+t).length&&($(".window."+t).addClass("show-begin"),$("#taskbar").attr("count",Number($("#taskbar").attr("count"))+1),$("#taskbar").html(`${$("#taskbar").html()}<a class="${t}" onclick="minwin('${t}')"><img src="icon/${t}.png"></a>`),"1"==$("#taskbar").attr("count")&&$("#taskbar").css("display","flex"),setTimeout((()=>{$("#taskbar").css("width",10+34*$("#taskbar").attr("count"))}),0),setTimeout((()=>{$(".window."+t).addClass("show")}),0),setTimeout((()=>{$(".window."+t).addClass("notrans")}),400),$(".window."+t).attr("style","top: 10%;left: 15%;"))}function n(t){$(".window."+t).removeClass("notrans"),$(".window."+t).removeClass("max"),$(".window."+t).removeClass("show"),$("#taskbar").attr("count",Number($("#taskbar").attr("count"))-1),$("#taskbar>."+t).remove(),$("#taskbar").css("width",10+34*$("#taskbar").attr("count")),setTimeout((()=>{"0"==$("#taskbar").attr("count")&&$("#taskbar").css("display","none")}),80),setTimeout((()=>{$(".window."+t).removeClass("show-begin")}),400),$(".window."+t+">.titbar>div>.wbtg.max").html('<i class="bi bi-app"></i>')}function l(t){$(".window."+t).hasClass("max")?($(".window."+t).removeClass("max"),$(".window."+t+">.titbar>div>.wbtg.max").html('<i class="bi bi-app"></i>'),setTimeout((()=>{$(".window."+t).addClass("notrans")}),400),$(".window."+t).attr("style","top: 10%;left: 15%;")):($(".window."+t).removeClass("notrans"),$(".window."+t).addClass("max"),$(".window."+t+">.titbar>div>.wbtg.max").html('<svg version="1.1" width="12" height="12" viewBox="0,0,37.65105,35.84556" style="margin-top:4px;"><g transform="translate(-221.17804,-161.33903)"><g style="stroke:var(--text);" data-paper-data="{&quot;isPaintingLayer&quot;:true}" fill="none" fill-rule="nonzero" stroke-width="2" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" style="mix-blend-mode: normal"><path d="M224.68734,195.6846c-2.07955,-2.10903 -2.00902,-6.3576 -2.00902,-6.3576l0,-13.72831c0,0 -0.23986,-1.64534 2.00902,-4.69202c1.97975,-2.68208 4.91067,-2.00902 4.91067,-2.00902h14.06315c0,0 3.77086,-0.23314 5.80411,1.67418c2.03325,1.90732 1.33935,5.02685 1.33935,5.02685v13.39347c0,0 0.74377,4.01543 -1.33935,6.3576c-2.08312,2.34217 -5.80411,1.67418 -5.80411,1.67418h-13.39347c0,0 -3.50079,0.76968 -5.58035,-1.33935z"/><path d="M229.7952,162.85325h16.06111c0,0 5.96092,-0.36854 9.17505,2.64653c3.21412,3.01506 2.11723,7.94638 2.11723,7.94638v18.55642"/></g></g></svg>'))}function r(t){$(".window."+t).hasClass("min")?($(".window."+t).addClass("show-begin"),setTimeout((()=>{$("#taskbar>."+t).removeClass("min"),$(".window."+t).removeClass("min"),$(".window."+t).hasClass("min-max")&&$(".window."+t).addClass("max"),$(".window."+t).removeClass("min-max")}),0),setTimeout((()=>{$(".window."+t).hasClass("max")||$(".window."+t).addClass("notrans")}),400)):($(".window."+t).hasClass("max")&&$(".window."+t).addClass("min-max"),$(".window."+t).removeClass("max"),$("#taskbar>."+t).addClass("min"),$(".window."+t).addClass("min"),$(".window."+t).removeClass("notrans"),setTimeout((()=>{$(".window."+t).removeClass("show-begin")}),400))}function d(){$("#start-menu").removeClass("show"),$("#start-btn").removeClass("show"),setTimeout((()=>{$("#start-menu").removeClass("show-begin")}),200)}function w(){$(".dock.theme>.bi").hasClass("bi-moon-fill")?($(".dock.theme>.bi").removeClass("bi-moon-fill"),$(".dock.theme>.bi").addClass("bi-brightness-high-fill"),$(":root").removeClass("dark")):($(".dock.theme>.bi").removeClass("bi-brightness-high-fill"),$(".dock.theme>.bi").addClass("bi-moon-fill"),$(":root").addClass("dark"))}$("#cm>.foc").blur((()=>{let t=event.target.parentNode;$(t).removeClass("show"),setTimeout((()=>{$(t).removeClass("show-begin")}),200)})),setInterval(a,1e3);const c=document.getElementsByTagName("html")[0],m=document.querySelectorAll(".window>.titbar"),u=document.querySelectorAll(".window");let b=0,h=0,f=!1;for(let T=0;T<u.length;T++){const S=u[T];function g(t){t.clientY-h<0?(S.setAttribute("style",`left:${t.clientX-b}px;top:0px`),"calc"!=S.classList[1]&&($("#window-fill").addClass("top"),setTimeout((()=>{$("#window-fill").addClass("fill")}),0),f=S)):f?($("#window-fill").removeClass("fill"),setTimeout((()=>{$("#window-fill").removeClass("top")}),200),f=!1):S.setAttribute("style",`left:${t.clientX-b}px;top:${t.clientY-h}px`)}m[T].addEventListener("mousedown",(t=>{b=t.clientX-S.offsetLeft,h=t.clientY-S.offsetTop,c.addEventListener("mousemove",g)})),c.addEventListener("mouseup",(()=>{c.removeEventListener("mousemove",g),f&&(l(f.classList[1]),f=!1,setTimeout((()=>{$("#window-fill").removeClass("fill"),$("#window-fill").removeClass("top")}),200))}))}o("about");for(var p=document.cookie.split(";"),C=0;C<p.length;C++){var v=p[C].trim(),k=v.substring(8,v.length);k!=t||0!=v.indexOf("version=")?($(".msg.update>.main>.tit").html('<i class="bi bi-stars" style="background-image: linear-gradient(100deg, #ad6eca, #3b91d8);-webkit-background-clip: text;-webkit-text-fill-color: transparent;text-shadow:3px 3px 5px var(--sd);filter:saturate(200%) brightness(0.9);"></i> '+$("#win-about>.cnt.update>div>details:first-child>summary").text()),$(".msg.update>.main>.cont").html($("#win-about>.cnt.update>div>details:first-child>p").html()),document.cookie="version="+t+";expires=Thu, 18 Dec 9999 12:00:00 GMT",document.getElementsByTagName("body")[0].onload=function(){$("#loadback").addClass("hide"),setTimeout((()=>{$("#loadback").css("display","none")}),200),setTimeout((()=>{$(".msg.update").addClass("show")}),2e3)}):document.getElementsByTagName("body")[0].onload=function(){$("#loadback").addClass("hide"),setTimeout((()=>{$("#loadback").css("display","none")}),200)}}